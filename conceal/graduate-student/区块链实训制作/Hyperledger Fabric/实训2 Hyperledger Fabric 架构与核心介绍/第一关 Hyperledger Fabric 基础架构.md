[TOC]

---

####任务描述

本关任务：根据本实训的相关知识，完成与 Hyperledger Fabric 基础架构相关的选择题。

####相关知识

Hyperledger Fabric 是目前主流的开源联盟链产品之一，自 2016 年 5 月 12 日开辟代码仓库之日起，已有快 4 年时间，产品趋于稳定，功能也越来越完善，正在适配不同业务场景下的需求。

纵观 Fabric 的发布历程，其一共经历了 v0.6.x、v1.x 和 v2.x 三个大版本。由于 v2.x 大版本刚发布不久，尚不够稳定，所以此实训以 v1.x 版本作为主要介绍对象。v1.x 大版本在 v1.0.0 之后的每个小版本中均会加入了一些新的 feature，来支持不同的业务场景以及完善相应的功能。

Hyperledger Fabric v1.x 整体基础架构如下图所示：

![image.png](https://ww1.sinaimg.cn/large/006alGmrgy1gbrd0o92idj30us0nk112.jpg)

架构主要由 Application、Fabric CA、Peer 和 Orderer Service 等组件构成。 Channel 、 Orgnization 和架构中的这些核心构件一同组成了 Hyperledger Fabric 的核心机制。

#####Application

代表一个 CLI（客户端）或 SDK，代表最终用户的实体。作用是创建交易并获取到足够的背书之后向 Orderer 节点（排序服务节点）提交交易请求（Peer 节点与 Orderer 节点提供了 gRPC 远程访问接口，供客户端调用

#####Fabric CA

负责对网络中所有的证书进行管理（对 Hyperledger Fabric 网络中的成员身份进行管理），提供标准的 PKI （Public Key Infrastructure，公钥基础设施）服务。是 MSP（Member Service Provider），成员服务提供商抽象组件的实体，保证了 Hyperledger Fabric 平台访问的安全性，提供了成员注册、管理及审核功能。

#####Peer

表示组织中的节点（Node）；Peer 节点以区块的形式从排序服务节点接收有序状态更新，维护状态和账本。在 Hyperledger Fabric 网络运行环境中，Peer 节点可以划分为如下 4 种角色。

- 背书节点：根据指定的策略调用智能合约，对结果进行背书，返回提案响应到客户端。

- 提交节点：验证数据并保存至账本中。

- 锚节点：通道中的每个组织（Org）都有一个锚节点，锚节点可以允许同一通道中不同组织的 Peer 节点发现通道内的所有 Peer 节点。

- Leader 节点：作为组织内所有节点的代表，能够连接到排序服务节点，将从排序服务节点接收到的批量区块广播给组织内的其它节点。

此外，Peer 节点还包括 Ledger、Chaincode、Event 等组件。

- Ledger：即账本，由排序服务构建的一个完全有序的交易哈希链块，保存在同一通道所有的 Peer 种。账本提供了在系统运行过程种发生的可验证历史，它包含所有成功的状态操作（有效交易）和不成功的状态操作（无效交易）。

- Chaincode：在 Hyperledger Fabric 中称为链式代码，简称链码，俗称智能合约；运行在一个安全的容器中，用来编写业务逻辑，可修改账本状态，可以理解为 fabric 网络对外提供的一个交互接口。

- Event：是 Hyperledger Fabric 提供的一个事件框架，比如链代码事件，拒绝事件，注册事件等，在编写代码的时候可以订阅这些事件来实现自己的业务逻辑。

#####Orderer Service

排序服务由多个排序节点组成，可以使交易变得有序。因为 Fabric 的设计依赖于确定性的共识算法，所以 Peer 节点所验证的交易经排序服务生成区块后都会是最终的和正确的。账本不会像其他分布式区块链中那样产生分叉。

除了促进确定性之外，排序节点还将链码执行的背书（发生在节点）与排序分离，这在性能和可伸缩性方面给 Hyperledger Fabric 提供了优势，消除了由同一个节点执行和排序时可能出现的瓶颈。

除了排序角色之外，排序节点还维护着允许创建通道的组织列表。此组织列表称为“联盟”，列表本身保存在“排序节点系统通道”（也称为“排序系统通道”）的配置中。默认情况下，此列表及其所在的通道只能由排序节点管理员编辑。

排序节点还对通道执行基本访问控制，限制谁可以读写数据，以及谁可以配置数据。

#####Channel

即通道，主要用于数据隔离，可一个大的网络分割成为不同的私有子网。通道提供一种通信机制，将指定的 Peer 和 Orderer 连接在一起，形成一个具有保密性的通信链路（虚拟），进行数据隔离（区块数据只能存储在已加入到通道中的成员节点内）。要加入通道的每个节点都必须拥有自己的、通过成员服务提供商（MSP）获得的身份标识。

#####Organization

代表联盟中的某一个组织，由某干个 Peer 节点组成。一个联盟又由多个不同的组织组成。一般情况下，参与一个 Channel 构建的所有 Peer 和 Organization 同属一个联盟。

####编程要求

根据相关知识，按照要求完成右侧选择题任务，其中第一、三题为多选题，第二题为单选题。

---
开始你的任务吧，祝你成功！

**参考**：

- [架构参考](https://hyperledger-fabric.readthedocs.io/zh_CN/release-1.4/architecture.html)

- [Fabric架构演变之路](https://segmentfault.com/a/1190000018330853)